{% extends "admin/base.html.jinja" %}
{% block title %}
  Resources
{% endblock %}

{% block content %}
  <div class="a-container">
    <h1 class="h2">{{ count }} resources</h1>
    <nav>
      <a href="{{ url_for('admin-new-resource') }}">Add resource</a>
    </nav>

    <table class="a-table u-mt">
      <thead>
        <tr>
          <th></th>
          <th>Name</th>
          <th>Type</th>
          <th>Duration</th>
          <th>Upload date</th>
          <th>Published?</th>
        </tr>
      </thead>

      <tbody>
      {% for resource in resources %}
        <tr>
          <td>
            <img
              class="media__image"
              src="{{ resource.get_thumb_url('sm') }}"
              loading="lazy"
              alt="thumbnail"
              width="25.5"
              height="25.5"
            />
          </td>
          <td>
            <a
              href="{{ url_for('admin-resource-detail', resource_id=resource.id) }}"
              >{{ resource.name }}</a
            >
          </td>
          <td>
            {% if resource.is_video() %}Video{% else %}Audio{% endif %}
          </td>
          <td>
            {{ resource.duration|duration_format }}
          </td>
          <td>
            {{ resource.created_at.strftime("%d/%m/%Y %H:%M") }}
          </td>
          <td>
            {{ resource.is_published }}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
